# Сценарии пользовательского опыта NOOW

## Общие принципы

### Цели сценариев
- **Вовлечение**: удержание пользователей в долгосрочной перспективе
- **Сбор данных**: максимизация научно значимых метрик
- **Комфорт**: отсутствие утомления и раздражения

### Технические ограничения
- База данных: Supabase
- Фронтенд: React Native/Expo
- Интеграции: HealthKit/Google Fit (опционально)

---

## Сценарий 1: Первый запуск и онбординг

### Цель
Познакомить пользователя с концепцией, собрать базовые данные, настроить персональные параметры.

### Поток
1. **Приветствие** (15 сек)
   - Краткое объяснение: "45 мин работа → 2 мин движение → 5 мин отдых"
   - Визуализация цикла с анимацией

2. **Быстрая настройка** (30 сек)
   - Рабочие часы (слайдер 8-12 часов)
   - Уровень активности (новичок/средний/продвинутый)
   - Уведомления (вкл/выкл)

3. **Первый когнитивный тест** (60 сек)
   - N-back тест (1-back, 30 попыток)
   - Объяснение: "Это поможет измерить улучшение внимания"
   - Сохранение baseline данных

4. **Первый микро-сет** (30 сек)
   - Демонстрация упражнения (отжимания/присед)
   - Счетчик повторений
   - Оценка самочувствия (1-5)

### Собираемые данные
```sql
-- users table
user_id, work_hours, activity_level, notifications_enabled, created_at

-- baseline_cognitive
user_id, test_type, accuracy, reaction_time, timestamp

-- first_activation
user_id, exercise_type, reps, mood_score, timestamp
```

---

## Сценарий 2: Ежедневный цикл

### Цель
Поддерживать ритм, собирать данные о выполнении и самочувствии.

### Поток
1. **Уведомление о начале цикла** (Push)
   - Время: каждые 52 минуты в рабочие часы
   - Текст: "Время для NOOW! 2 минуты движения"

2. **Экран активации** (2 мин)
   - Таймер обратного отсчета
   - Счетчик повторений
   - Кнопка "Пропустить" (с причиной)
   - Кнопка "Больно" (переключение на альтернативное упражнение)

3. **Когнитивный тест** (30 сек)
   - Автоматический запуск после упражнения
   - N-back или Stroop (чередование)
   - Прогресс-бар выполнения

4. **Feedback экран** (10 сек)
   - "Отлично! Сет завершен"
   - Оценка энергии (1-5)
   - Оценка настроения (1-5)
   - Краткая статистика дня

### Собираемые данные
```sql
-- daily_cycles
cycle_id, user_id, start_time, end_time, completed

-- activations
activation_id, cycle_id, exercise_type, reps, duration, mood_score, energy_score

-- cognitive_tests
test_id, activation_id, test_type, accuracy, reaction_time, timestamp

-- skips
skip_id, cycle_id, reason, timestamp
```

---

## Сценарий 3: Еженедельная аналитика

### Цель
Показать прогресс, мотивировать продолжение, собрать качественные данные.

### Поток
1. **Уведомление о отчете** (Push)
   - Время: каждое воскресенье вечером
   - Текст: "Ваш недельный отчет NOOW готов!"

2. **Экран статистики** (2 мин)
   - Количество завершенных циклов
   - Средняя точность когнитивных тестов
   - График энергии по дням
   - Сравнение с предыдущей неделей

3. **Мини-опрос** (30 сек)
   - "Как изменилась ваша продуктивность?" (1-5)
   - "Рекомендуете ли NOOW друзьям?" (да/нет)
   - "Какие улучшения хотели бы видеть?" (текст)

4. **Мотивация** (15 сек)
   - Достижения и бейджи
   - Следующая цель
   - Социальное доказательство

### Собираемые данные
```sql
-- weekly_reports
report_id, user_id, week_start, cycles_completed, avg_cognitive_accuracy, avg_energy

-- user_feedback
feedback_id, user_id, productivity_change, would_recommend, suggestions, timestamp

-- achievements
achievement_id, user_id, type, earned_at
```

---

## Сценарий 4: Адаптация и персонализация

### Цель
Улучшить эффективность на основе собранных данных.

### Поток
1. **Анализ паттернов** (автоматически)
   - Время дня с лучшей производительностью
   - Предпочтительные упражнения
   - Частота пропусков

2. **Персонализированные рекомендации** (Push)
   - "Вы лучше всего работаете в 10:00, попробуйте сложное упражнение"
   - "Заметили, что планка вам больше подходит"

3. **Настройка параметров** (опционально)
   - Изменение длительности циклов
   - Выбор упражнений
   - Частота уведомлений

### Собираемые данные
```sql
-- user_patterns
pattern_id, user_id, pattern_type, value, confidence_score

-- personalization
personalization_id, user_id, setting_type, old_value, new_value, timestamp

-- recommendations
recommendation_id, user_id, type, content, shown_at, acted_upon
```

---

## Сценарий 5: Социальные элементы

### Цель
Увеличить вовлечение через социальное взаимодействие.

### Поток
1. **Достижения** (Push)
   - "Поздравляем! Вы завершили 7 дней подряд"
   - Возможность поделиться в соцсетях

2. **Командные вызовы** (опционально)
   - "Присоединитесь к вызову 'Неделя фокуса'"
   - Анонимная статистика команды

3. **Сообщество** (опционально)
   - Форум для обсуждения результатов
   - Обмен советами и опытом

### Собираемые данные
```sql
-- social_actions
action_id, user_id, action_type, content, timestamp

-- team_challenges
challenge_id, user_id, team_id, participation_rate, completion_rate

-- community_engagement
engagement_id, user_id, post_type, interaction_count, timestamp
```

---

## Технические требования

### База данных (Supabase)
```sql
-- Основные таблицы
users (id, email, settings, created_at)
cycles (id, user_id, start_time, end_time, status)
activations (id, cycle_id, exercise_type, reps, mood, energy)
cognitive_tests (id, activation_id, type, accuracy, reaction_time)
user_feedback (id, user_id, type, content, timestamp)

-- Индексы для производительности
CREATE INDEX idx_cycles_user_time ON cycles(user_id, start_time);
CREATE INDEX idx_activations_cycle ON activations(cycle_id);
CREATE INDEX idx_tests_activation ON cognitive_tests(activation_id);
```

### API Endpoints
```typescript
// Основные эндпоинты
POST /api/cycles/start
POST /api/cycles/complete
POST /api/activations/record
POST /api/cognitive/record
GET /api/user/stats
POST /api/feedback/submit
```

### Локальное кэширование
- Кэширование настроек пользователя
- Офлайн-режим для записи данных
- Синхронизация при восстановлении соединения

---

## Метрики успеха

### Вовлечение
- DAU/WAU ratio > 0.3
- Средняя длительность сессии > 2 мин
- Retention Day 7 > 25%

### Сбор данных
- Завершение когнитивных тестов > 80%
- Заполнение feedback > 70%
- Качество данных (отсутствие дублей, корректные значения)

### Комфорт пользователя
- Количество жалоб < 5%
- Время отклика приложения < 2 сек
- Простота навигации (количество кликов до цели)

---

## Риски и митигация

### Риск: Утомление от частых уведомлений
**Митигация**: Адаптивная частота, возможность настройки, "тихие часы"

### Риск: Сложность когнитивных тестов
**Митигация**: Простые инструкции, возможность пропуска, постепенное усложнение

### Риск: Потеря данных
**Митигация**: Локальное кэширование, автоматическая синхронизация, резервное копирование

### Риск: Низкая вовлеченность
**Митигация**: Геймификация, социальные элементы, персонализация 