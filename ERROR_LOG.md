# Лог ошибок

## 2024-03-19
### Ошибка совместимости NativeWind с Tailwind CSS
- **Время**: 19.03.2024
- **Описание**: При попытке запуска приложения после очистки кеша возникла ошибка совместимости версий
- **Текст ошибки**: `Error: NativeWind only supports Tailwind CSS v3`
- **Место возникновения**: Запуск приложения через `npm run dev -- --clear`
- **Причина**: Несовместимость версий NativeWind и Tailwind CSS
- **Статус**: В процессе решения

### Ошибка конфигурации NativeWind
- **Время**: 19.03.2024
- **Описание**: Tailwind CSS не настроен с пресетом NativeWind
- **Текст ошибки**: `Error: Tailwind CSS has not been configured with the NativeWind preset`
- **Место возникновения**: Запуск приложения через `npm run dev`
- **Причина**: Отсутствует правильная конфигурация Tailwind CSS для NativeWind
- **Статус**: В процессе решения

### Ошибка импорта global.css
- **Время**: 19.03.2024
- **Описание**: Не удается найти файл global.css
- **Текст ошибки**: `Unable to resolve "./global.css" from "app\_layout.tsx"`
- **Место возникновения**: Запуск приложения через `npm run dev`
- **Причина**: Неправильный путь к файлу global.css или файл находится не в том месте
- **Статус**: В процессе решения

### Повторная проблема с редиректом после авторизации
- **Время**: 19.03.2024
- **Описание**: После авторизации пользователь по-прежнему перенаправляется на главный экран (экран таймера), минуя онбординг.
- **Текст ошибки**: Приложение сразу загружает экран таймера после авторизации.
- **Место возникновения**: Логика редиректа после авторизации, предположительно связанная с некорректным состоянием `localStorage` или логикой в `app/index.tsx`.
- **Причина**: Флаг `hasCompletedOnboarding` мог быть установлен в `true` или логика его проверки работает неправильно.
- **Статус**: В процессе решения (повторная ошибка)

### Ошибка линтера после корректировки онбординга
- **Время**: 19.03.2024
- **Описание**: При попытке исправления дизайна и логики онбординга в app/onboarding/step-4.tsx возникла ошибка линтера.
- **Текст ошибки**: `Line 323: Type 'string | boolean | null' is not assignable to type 'boolean | undefined'. Type 'null' is not assignable to type 'boolean | undefined'.`
- **Место возникновения**: app/onboarding/step-4.tsx, строка 323, свойство `disabled` кнопки "ПРОДОЛЖИТЬ".
- **Причина**: Несоответствие типов: свойство `disabled` ожидает булево значение, а получает `null` или `string` в определенных условиях.
- **Статус**: В процессе решения.

### Повторные проблемы с дизайном онбординга (Шаги 3, 5, 6)
- **Время**: 19.03.2024
- **Описание**: На шагах 3, 5, 6 онбординга фон по-прежнему синий, не соответствует общему черному стилю. На шагах 5 и 6 кнопка "Пропустить" конфликтует с прогресс-баром в заголовке.
- **Текст ошибки**: Визуальные несоответствия дизайна на скриншотах.
- **Место возникновения**: app/onboarding/step-3.tsx, app/onboarding/step-5.tsx, app/onboarding/step-6.tsx.
- **Причина**: Предыдущие изменения не применились или были недостаточными.
- **Статус**: В процессе решения (повторная ошибка).

### Повторная ошибка: TextInput не определен на Шаге 6 Онбординга
- **Время**: 19.03.2024
- **Описание**: Ошибка `TextInput is not defined` по-прежнему возникает на 6-м шаге онбординга, несмотря на попытки добавления импорта.
- **Текст ошибки**: `Uncaught Error: TextInput is not defined`
- **Место возникновения**: `app/onboarding/step-6.tsx`
- **Причина**: Изменения кода не применяются или кеш не очищается должным образом.
- **Статус**: В процессе решения (повторная ошибка).

### Повторные проблемы с дизайном онбординга (Шаги 1, 3, 5, 6) и авторизации
- **Время**: 19.03.2024
- **Описание**: Фоновый градиент на экранах авторизации, а также на шагах 1, 3, 5, 6 онбординга по-прежнему не соответствует общему черному стилю приложения. На шагах 5 и 6 также наблюдается конфликт кнопки "Пропустить" с прогресс-баром.
- **Текст ошибки**: Визуальные несоответствия дизайна на скриншотах.
- **Место возникновения**: app/auth/_layout.tsx, app/onboarding/index.tsx, app/onboarding/step-3.tsx, app/onboarding/step-5.tsx, app/onboarding/step-6.tsx.
- **Причина**: Изменения кода не применяются или кеш не очищается должным образом.
- **Статус**: В процессе решения (повторная ошибка).

## Журнал ошибок разработки NOOW

Этот файл содержит записи обо всех обнаруженных ошибках в коде, их причинах и методах устранения. 

### Проверка визуальных изменений (Фаза 2.1, 2.2)

**Описание:** Выполнена проверка визуальных изменений на экранах аутентификации и онбординга после перевода стилей на Tailwind CSS, добавления градиентного фона и кнопок "Пропустить" с модальными окнами.
**Статус:** Ожидаем подтверждения корректности отображения и функциональности от проджект-менеджера. 

### Ошибка при запуске приложения: "Missing script: \"start\"" (Повторно)

**Описание:** Повторная попытка запуска приложения командой `npm start --clear` снова привела к ошибке "Missing script: \"start\"".
**Причина:** Повторное использование неправильной команды для запуска приложения. В `package.json` отсутствует скрипт `start`, и для запуска приложения следует использовать `npm run dev`.
**Решение:** Для запуска приложения с очисткой кеша Metro необходимо использовать команду `npm run dev -- --clear`.

### Ошибка конфигурации Babel: ".plugins is not a valid Plugin property"

**Описание:** При запуске приложения возникла ошибка Babel `[BABEL] ... .plugins is not a valid Plugin property`, указывающая на проблему с файлом `babel.config.js`.
**Причина:** Вероятно, проблема связана с синтаксисом или совместимостью плагина `nativewind/babel` в текущей конфигурации Babel.
**Решение:** Попытка исправить, обернув `nativewind/babel` в дополнительный массив в `babel.config.js`. 

### Повторная ошибка конфигурации Babel: ".plugins is not a valid Plugin property" (Проблема с NativeWind)

**Описание:** Ошибка `[BABEL] ... .plugins is not a valid Plugin property` продолжала появляться даже после полной очистки `node_modules` и кеша npm. Пользователь подтвердил, что приложение работало корректно до установки Tailwind CSS и NativeWind.
**Причина:** Это **ключевое наблюдение** указывает на то, что проблема напрямую связана с интеграцией `nativewind/babel` в текущую конфигурацию Babel/Expo. Первоначальной причиной было некорректное расположение `nativewind/babel` в секции `plugins` вместо `presets`, а также отсутствие опции `jsxImportSource: "nativewind"` для `babel-preset-expo`.
**Решение:** Скорректирован `babel.config.js` согласно официальной документации NativeWind для Expo:
1. `'nativewind/babel'` перемещен из `plugins` в `presets`.
2. Добавлена опция `jsxImportSource: "nativewind"` для `babel-preset-expo`.
3. `react-native-reanimated/plugin` оставлен в секции `plugins`.

**Статус:** Конфигурация `babel.config.js` обновлена. Требуется очистка кеша Metro и перезапуск приложения.

### Ошибка удаления директории node_modules: Неправильный синтаксис команды

**Описание:** При попытке удалить директорию `node_modules` командой `rmdir /s /q node_modules` возникла ошибка "Не удается найти позиционный параметр, принимающий аргумент \"/q\".
**Причина:** Использован синтаксис команды `rmdir`, который не полностью совместим с PowerShell. В PowerShell для рекурсивного и принудительного удаления директорий следует использовать `Remove-Item`.
**Решение:** Повторить удаление `node_modules` с помощью `Remove-Item -Path node_modules -Recurse -Force`. 

### Повторная ошибка удаления директории node_modules: Блокировка файлов или длинные пути

**Описание:** Команда `Remove-Item -Path node_modules -Recurse -Force` завершилась с ошибками "Папка не пуста" и "Не удалось найти часть пути", что указывает на блокировку файлов или проблемы с длинными путями в Windows.
**Причина:** Некоторые файлы или папки внутри `node_modules` могут быть заняты другими процессами, или пути к файлам превышают допустимую длину для стандартных утилит Windows.
**Решение:** Попытаться удалить `node_modules` с помощью `npx rimraf node_modules` для более надежного удаления. 